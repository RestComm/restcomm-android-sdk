<?xml version="1.0" encoding="utf-8"?>
<manifest package="org.restcomm.android.olympus"
          xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-feature android:name="android.hardware.camera"/>
    <uses-feature android:name="android.hardware.camera.autofocus"/>
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <!--
    Provided by SDK
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.CAMERA"/>
    -->


    <!-- WARNING: Disable for production builds. This is needed for debug purposes only, to be able to store Jain SIP logs in external storage -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <!-- Needed for TestFairy. IMPORTANT: remove in a production App -->
    <!-- Needed to be able to retrieve and send logs for the App via email for troubleshooting -->
    <uses-permission android:name="android.permission.READ_LOGS"/>
    <uses-permission android:name="android.permission.BATTERY_STATS"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher_final"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/AppTheme">

        <!-- <meta-data android:name="net.hockeyapp.android.appIdentifier" android:value="${HOCKEYAPP_APP_ID}" /> -->

        <!--
        Notice a workaround: we 're using the app_name as the label of the signin activity. Reason for this is that without it somehow
        the value we put there gets picked up as the name of the App as a whole and shows up in the launcher. Similar to
        https://stackoverflow.com/questions/39971859/app-name-doesnt-change-in-launcher-when-using-product-flavors, check comments on the
        submitter
        -->
        <activity
            android:name=".SigninActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>

                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.CALL"/>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.DIAL" />
                <category android:name="android.intent.category.DEFAULT"/>
                <category android:name="android.intent.category.BROWSABLE"/>

                <data android:scheme="restcomm-sip"/>
                <data android:scheme="restcomm-tel"/>
                <data android:scheme="restcomm-client"/>
                <data android:scheme="sip"/>
                <data android:scheme="tel"/>
                <data android:scheme="client"/>
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:label="@string/contacts_activity_label"
            android:launchMode="singleTask" >
        </activity>
        <activity
            android:name=".CallActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:label="@string/title_activity_call"
            android:parentActivityName=".MainActivity" >
        </activity>
        <activity
            android:name=".MessageActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:label="@string/title_activity_message"
            android:launchMode="singleTop"
            android:parentActivityName=".MainActivity" >
        </activity>
        <activity
            android:name=".SettingsActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:label="@string/title_activity_settings"
            android:parentActivityName=".MainActivity" >
        </activity>
        <activity
            android:name=".BugReportActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:label="@string/title_activity_bug_report"
            android:parentActivityName=".MainActivity"
            android:theme="@style/AppTheme">
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="org.restcomm.android.olympus.MainActivity"/>
        </activity>
    </application>

</manifest>